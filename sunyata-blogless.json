{
    "profile": "norums",
    "regions": "us-east-1",
    "name":"Blogless",
    "description":"Blogless stack.",
    "stages": ["alpha"],
    "lambdas": [
        {
            "name":"bloglessLanding",
            "runtime":"python2.7",
            "handler":"handlers.landing_page",
            "directory":"blogless-zipdir",
            "description":"blogless lambda function.",
            "timeout":10,
            "memory":256,
            "role":"dynamoRead"
        },
        {
            "name":"bloglessPost",
            "runtime":"python2.7",
            "handler":"handlers.view_post",
            "directory":"blogless-zipdir",
            "description":"blogless lambda function.",
            "timeout":10,
            "memory":256,
            "role":"dynamoRead"
        },
        {
            "name":"bloglessStatic",
            "runtime":"python2.7",
            "handler":"handlers.load_static",
            "directory":"blogless-zipdir",
            "description":"blogless lambda function.",
            "timeout":10,
            "memory":512,
            "role":"dynamoRead"
        },
        {
            "name":"bloglessCatchall",
            "runtime":"python2.7",
            "handler":"handlers.catchall",
            "directory":"blogless-zipdir",
            "description":"blogless lambda function.",
            "timeout":10,
            "memory":512,
            "role":"dynamoRead",
	    "proxy":true
        }
        ],
    "paths": [
        {
            "path":"/",
            "function":"bloglessLanding",
            "extra":{"basepath":["/"]}
        },
        {
            "path":"/posts",
            "function":"bloglessPost",
            "extra":{"basepath":["/posts"]},
            "querystring_params":{"id":"identifier"}
        },
        {
            "path":"/style.css",
            "function":"bloglessStatic",
            "extra":{"basepath":["/style.css"],"filename":"static/style.css"}
        },
        {
            "path":"/index.html",
            "function":"bloglessLanding",
            "extra":{"basepath":["/index.html"]}
        },
        {
            "path":"/proxyplus/{proxy+}",
            "function":"bloglessCatchall",
            "extra":{"basepath":["/proxyplus/"]}
        },
        {
            "path":"/proxyplus",
            "function":"bloglessCatchall",
            "extra":{"basepath":["/proxyplus"]}
        }
    ],
    "roles": {
        "dynamoRead":[
        {
            "Effect": "Allow",
            "Action": "logs:CreateLogGroup",
            "Resource": { "Fn::Join" : [ ":", [ "arn:aws:logs",{"Ref" : "AWS::Region"},{ "Ref" : "AWS::AccountId" },"*" ] ] }
        },
        {
            "Effect": "Allow",
            "Action": [
                "logs:CreateLogStream",
                "logs:PutLogEvents"
            ],
            "Resource": { "Fn::Join" : [ ":", [ "arn:aws:logs",{"Ref" : "AWS::Region"},{ "Ref" : "AWS::AccountId" },"log-group:/aws/lambda/*" ] ] }
        },
        {
            "Effect": "Allow",
            "Action": [
                "dynamodb:Describe*",
                "dynamodb:Get*",
                "dynamodb:List*",
                "dynamodb:Query*",
                "dynamodb:Scan"
            ],
            "Resource": "*"
        }
    ]
    }
}
