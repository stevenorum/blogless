{
   "AWSTemplateFormatVersion": "2010-09-09",
   "Parameters" : {},
   "Resources": {
     "posts": {
       "Type": "AWS::DynamoDB::Table",
       "Properties": {
         "TableName": "blogless_posts",
         "AttributeDefinitions": [
           {
             "AttributeName": "post_id",
             "AttributeType": "S"
           },
           {
             "AttributeName": "post_timestamp",
             "AttributeType": "S"
           }
         ],
         "KeySchema": [
           {
             "AttributeName": "post_id",
             "KeyType": "HASH"
           },
           {
             "AttributeName": "post_timestamp",
             "KeyType": "RANGE"
           }
         ],
         "ProvisionedThroughput": {
           "ReadCapacityUnits": "1",
           "WriteCapacityUnits": "1"
         },
         "GlobalSecondaryIndexes": [
           {
             "IndexName": "post_timestamp_index",
             "KeySchema": [
               {
                 "AttributeName": "post_timestamp",
                 "KeyType": "HASH"
               }
             ],
             "Projection": {
               "NonKeyAttributes" : ["published", "publish_timestamp", "post_title", "keywords"],
	       "ProjectionType" : "INCLUDE"
             },
             "ProvisionedThroughput": {
               "ReadCapacityUnits": "1",
               "WriteCapacityUnits": "1"
             }
           }
         ]
       }
     }
   },
   "Description": "DynamoDB table for blog post storage."
 }
